{"ast":null,"code":"import React,{useEffect,useRef}from'react';import*as d3 from'd3';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SentenceGraph=_ref=>{let{nodes,width=600,height=400}=_ref;const svgRef=useRef(null);useEffect(()=>{if(!svgRef.current||nodes.length===0)return;const svg=d3.select(svgRef.current);svg.selectAll('*').remove();// Create links from node connections\nconst links=nodes.flatMap(node=>node.connections.map(conn=>({source:node.id,target:conn.target,weight:conn.weight})));// Set up force simulation\nconst simulation=d3.forceSimulation(nodes).force('link',d3.forceLink(links).id(d=>d.id).strength(0.1)).force('charge',d3.forceManyBody().strength(-50)).force('center',d3.forceCenter(width/2,height/2)).force('collision',d3.forceCollide(30));// Create link elements\nconst link=svg.append('g').selectAll('line').data(links).enter().append('line').attr('stroke','#999').attr('stroke-opacity',0.6).attr('stroke-width',d=>Math.sqrt(d.weight*5));// Create node elements\nconst node=svg.append('g').selectAll('circle').data(nodes).enter().append('circle').attr('r',d=>5+d.score*15).attr('fill',d=>{if(d.sentiment>0.1)return'#10B981';// Positive - green\nif(d.sentiment<-0.1)return'#EF4444';// Negative - red\nreturn'#6B7280';// Neutral - gray\n}).attr('stroke','#fff').attr('stroke-width',2).style('cursor','pointer');// Add text labels\nconst text=svg.append('g').selectAll('text').data(nodes).enter().append('text').text(d=>d.text.split(' ').slice(0,3).join(' ')+'...').attr('font-size','10px').attr('font-family','inherit').attr('fill','#374151').attr('text-anchor','middle').attr('dy','.35em').style('pointer-events','none');// Add tooltips\nconst tooltip=d3.select('body').append('div').attr('class','tooltip').style('opacity',0).style('position','absolute').style('background','rgba(0, 0, 0, 0.8)').style('color','white').style('border-radius','4px').style('padding','8px').style('font-size','12px').style('pointer-events','none').style('z-index','1000');node.on('mouseover',function(event,d){tooltip.transition().duration(200).style('opacity',.9);tooltip.html(`\n          <strong>Score:</strong> ${d.score.toFixed(3)}<br/>\n          <strong>Sentiment:</strong> ${d.sentiment.toFixed(3)}<br/>\n          <strong>Text:</strong> ${d.text}\n        `).style('left',event.pageX+10+'px').style('top',event.pageY-28+'px');}).on('mouseout',function(){tooltip.transition().duration(500).style('opacity',0);});// Update positions on simulation tick\nsimulation.on('tick',()=>{link.attr('x1',d=>d.source.x).attr('y1',d=>d.source.y).attr('x2',d=>d.target.x).attr('y2',d=>d.target.y);node.attr('cx',d=>d.x).attr('cy',d=>d.y);text.attr('x',d=>d.x).attr('y',d=>d.y+25);});// Cleanup function\nreturn()=>{simulation.stop();tooltip.remove();};},[nodes,width,height]);return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg border border-grey-200\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-sm font-semibold text-grey-800 mb-3\",children:\"Sentence Relationships\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-xs text-grey-600 mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full bg-green-500 mr-1\"}),\"Positive sentiment\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full bg-red-500 mr-1\"}),\"Negative sentiment\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-3 h-3 rounded-full bg-gray-500 mr-1\"}),\"Neutral sentiment\"]})]}),/*#__PURE__*/_jsx(\"svg\",{ref:svgRef,width:width,height:height,className:\"border border-grey-100 rounded\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-grey-500 mt-2\",children:\"Circle size = importance score \\u2022 Lines = sentence similarity \\u2022 Hover for details\"})]});};export default SentenceGraph;","map":{"version":3,"names":["React","useEffect","useRef","d3","jsx","_jsx","jsxs","_jsxs","SentenceGraph","_ref","nodes","width","height","svgRef","current","length","svg","select","selectAll","remove","links","flatMap","node","connections","map","conn","source","id","target","weight","simulation","forceSimulation","force","forceLink","d","strength","forceManyBody","forceCenter","forceCollide","link","append","data","enter","attr","Math","sqrt","score","sentiment","style","text","split","slice","join","tooltip","on","event","transition","duration","html","toFixed","pageX","pageY","x","y","stop","className","children","ref"],"sources":["/Users/averyreyna/Codebases/rerank/src/components/SentenceGraph.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport * as d3 from 'd3';\nimport { SentenceNode } from '../utils/textSummarization';\n\ninterface SentenceGraphProps {\n  nodes: SentenceNode[];\n  width?: number;\n  height?: number;\n}\n\nconst SentenceGraph: React.FC<SentenceGraphProps> = ({ \n  nodes, \n  width = 600, \n  height = 400 \n}) => {\n  const svgRef = useRef<SVGSVGElement>(null);\n\n  useEffect(() => {\n    if (!svgRef.current || nodes.length === 0) return;\n\n    const svg = d3.select(svgRef.current);\n    svg.selectAll('*').remove();\n\n    // Create links from node connections\n    const links = nodes.flatMap(node => \n      node.connections.map(conn => ({\n        source: node.id,\n        target: conn.target,\n        weight: conn.weight\n      }))\n    );\n\n    // Set up force simulation\n    const simulation = d3.forceSimulation(nodes as any)\n      .force('link', d3.forceLink(links).id((d: any) => d.id).strength(0.1))\n      .force('charge', d3.forceManyBody().strength(-50))\n      .force('center', d3.forceCenter(width / 2, height / 2))\n      .force('collision', d3.forceCollide(30));\n\n    // Create link elements\n    const link = svg.append('g')\n      .selectAll('line')\n      .data(links)\n      .enter().append('line')\n      .attr('stroke', '#999')\n      .attr('stroke-opacity', 0.6)\n      .attr('stroke-width', (d: any) => Math.sqrt(d.weight * 5));\n\n    // Create node elements\n    const node = svg.append('g')\n      .selectAll('circle')\n      .data(nodes)\n      .enter().append('circle')\n      .attr('r', (d: any) => 5 + d.score * 15)\n      .attr('fill', (d: any) => {\n        if (d.sentiment > 0.1) return '#10B981'; // Positive - green\n        if (d.sentiment < -0.1) return '#EF4444'; // Negative - red\n        return '#6B7280'; // Neutral - gray\n      })\n      .attr('stroke', '#fff')\n      .attr('stroke-width', 2)\n      .style('cursor', 'pointer');\n\n    // Add text labels\n    const text = svg.append('g')\n      .selectAll('text')\n      .data(nodes)\n      .enter().append('text')\n      .text((d: any) => d.text.split(' ').slice(0, 3).join(' ') + '...')\n      .attr('font-size', '10px')\n      .attr('font-family', 'inherit')\n      .attr('fill', '#374151')\n      .attr('text-anchor', 'middle')\n      .attr('dy', '.35em')\n      .style('pointer-events', 'none');\n\n    // Add tooltips\n    const tooltip = d3.select('body').append('div')\n      .attr('class', 'tooltip')\n      .style('opacity', 0)\n      .style('position', 'absolute')\n      .style('background', 'rgba(0, 0, 0, 0.8)')\n      .style('color', 'white')\n      .style('border-radius', '4px')\n      .style('padding', '8px')\n      .style('font-size', '12px')\n      .style('pointer-events', 'none')\n      .style('z-index', '1000');\n\n    node\n      .on('mouseover', function(event: any, d: any) {\n        tooltip.transition()\n          .duration(200)\n          .style('opacity', .9);\n        tooltip.html(`\n          <strong>Score:</strong> ${d.score.toFixed(3)}<br/>\n          <strong>Sentiment:</strong> ${d.sentiment.toFixed(3)}<br/>\n          <strong>Text:</strong> ${d.text}\n        `)\n          .style('left', (event.pageX + 10) + 'px')\n          .style('top', (event.pageY - 28) + 'px');\n      })\n      .on('mouseout', function() {\n        tooltip.transition()\n          .duration(500)\n          .style('opacity', 0);\n      });\n\n    // Update positions on simulation tick\n    simulation.on('tick', () => {\n      link\n        .attr('x1', (d: any) => d.source.x)\n        .attr('y1', (d: any) => d.source.y)\n        .attr('x2', (d: any) => d.target.x)\n        .attr('y2', (d: any) => d.target.y);\n\n      node\n        .attr('cx', (d: any) => d.x)\n        .attr('cy', (d: any) => d.y);\n\n      text\n        .attr('x', (d: any) => d.x)\n        .attr('y', (d: any) => d.y + 25);\n    });\n\n    // Cleanup function\n    return () => {\n      simulation.stop();\n      tooltip.remove();\n    };\n  }, [nodes, width, height]);\n\n  return (\n    <div className=\"bg-white p-4 rounded-lg border border-grey-200\">\n      <h4 className=\"text-sm font-semibold text-grey-800 mb-3\">Sentence Relationships</h4>\n      <div className=\"flex items-center space-x-4 text-xs text-grey-600 mb-3\">\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 rounded-full bg-green-500 mr-1\"></div>\n          Positive sentiment\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 rounded-full bg-red-500 mr-1\"></div>\n          Negative sentiment\n        </div>\n        <div className=\"flex items-center\">\n          <div className=\"w-3 h-3 rounded-full bg-gray-500 mr-1\"></div>\n          Neutral sentiment\n        </div>\n      </div>\n      <svg\n        ref={svgRef}\n        width={width}\n        height={height}\n        className=\"border border-grey-100 rounded\"\n      />\n      <p className=\"text-xs text-grey-500 mt-2\">\n        Circle size = importance score • Lines = sentence similarity • Hover for details\n      </p>\n    </div>\n  );\n};\n\nexport default SentenceGraph;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}