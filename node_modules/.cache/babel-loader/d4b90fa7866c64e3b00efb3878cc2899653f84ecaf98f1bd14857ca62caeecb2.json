{"ast":null,"code":"// Text summarization utilities implementing TextRank and LexRank algorithms\nimport Sentiment from'sentiment';// Simple sentence tokenizer\nfunction tokenizeSentences(text){return text.split(/[.!?]+/).map(s=>s.trim()).filter(s=>s.length>10);// Filter out very short sentences\n}// Calculate cosine similarity between two sentences\nfunction cosineSimilarity(sent1,sent2){const words1=sent1.toLowerCase().split(/\\s+/);const words2=sent2.toLowerCase().split(/\\s+/);const allWords=Array.from(new Set([...words1,...words2]));const vector1=allWords.map(word=>words1.filter(w=>w===word).length);const vector2=allWords.map(word=>words2.filter(w=>w===word).length);const dotProduct=vector1.reduce((sum,val,i)=>sum+val*vector2[i],0);const magnitude1=Math.sqrt(vector1.reduce((sum,val)=>sum+val*val,0));const magnitude2=Math.sqrt(vector2.reduce((sum,val)=>sum+val*val,0));return magnitude1&&magnitude2?dotProduct/(magnitude1*magnitude2):0;}// Initialize sentiment analyzer\nconst sentiment=new Sentiment();// Calculate quality metrics for a summary\nfunction calculateQualityMetrics(originalText,summaryText,selectedSentences,allSentences){// Coverage: ratio of unique words in summary vs original\nconst originalWords=new Set(originalText.toLowerCase().match(/\\b\\w+\\b/g)||[]);const summaryWords=new Set(summaryText.toLowerCase().match(/\\b\\w+\\b/g)||[]);const coverage=summaryWords.size/originalWords.size;// Coherence: average similarity between consecutive sentences in summary\nlet coherenceSum=0;for(let i=0;i<selectedSentences.length-1;i++){coherenceSum+=cosineSimilarity(selectedSentences[i],selectedSentences[i+1]);}const coherence=selectedSentences.length>1?coherenceSum/(selectedSentences.length-1):1;// Diversity: ratio of unique words to total words in summary\nconst totalSummaryWords=summaryText.toLowerCase().match(/\\b\\w+\\b/g)||[];const diversity=summaryWords.size/totalSummaryWords.length;// Confidence: weighted combination of metrics\nconst confidence=coverage*0.4+coherence*0.3+diversity*0.3;// Sentiment analysis\nconst sentimentResult=sentiment.analyze(summaryText);return{coverage:Math.round(coverage*100)/100,coherence:Math.round(coherence*100)/100,diversity:Math.round(diversity*100)/100,confidence:Math.round(confidence*100)/100,sentiment:{score:sentimentResult.score,comparative:Math.round(sentimentResult.comparative*100)/100,positive:sentimentResult.positive,negative:sentimentResult.negative}};}// Generate visualization data\nfunction generateVisualizationData(sentences,scores,similarityMatrix){// Create sentence nodes for graph visualization\nconst sentenceGraph=sentences.map((sentence,i)=>{const sentimentScore=sentiment.analyze(sentence).comparative;const connections=sentences.map((_,j)=>{var _similarityMatrix$i;return{target:`sentence-${j}`,weight:((_similarityMatrix$i=similarityMatrix[i])===null||_similarityMatrix$i===void 0?void 0:_similarityMatrix$i[j])||0};}).filter(conn=>conn.weight>0.1&&conn.target!==`sentence-${i}`);return{id:`sentence-${i}`,text:sentence.slice(0,100)+(sentence.length>100?'...':''),score:scores[i]||0,sentiment:sentimentScore,connections};});// Simple topic clustering based on word overlap\nconst topicClusters=generateTopicClusters(sentences);return{sentenceGraph,topicClusters};}// Generate topic clusters using simple k-means-like approach\nfunction generateTopicClusters(sentences){const words=sentences.flatMap(s=>s.toLowerCase().match(/\\b\\w{4,}\\b/g)||[]);const wordFreq={};words.forEach(word=>{wordFreq[word]=(wordFreq[word]||0)+1;});// Get top keywords\nconst topWords=Object.entries(wordFreq).sort((_ref,_ref2)=>{let[,a]=_ref;let[,b]=_ref2;return b-a;}).slice(0,12).map(_ref3=>{let[word]=_ref3;return word;});// Create clusters based on keyword presence\nconst clusters=[];const colors=['#3B82F6','#EF4444','#10B981','#F59E0B'];for(let i=0;i<Math.min(3,Math.ceil(topWords.length/4));i++){const clusterKeywords=topWords.slice(i*4,(i+1)*4);const clusterSentences=sentences.filter(sentence=>clusterKeywords.some(keyword=>sentence.toLowerCase().includes(keyword)));if(clusterSentences.length>0){clusters.push({id:`cluster-${i}`,keywords:clusterKeywords,sentences:clusterSentences.map(s=>s.slice(0,80)+'...'),centroid:[Math.random()*100,Math.random()*100],// Simplified\ncolor:colors[i%colors.length]});}}return clusters;}// TextRank implementation\nexport function textRankSummarize(text){let numSentences=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;const startTime=Date.now();const sentences=tokenizeSentences(text);if(sentences.length<=numSentences){const summary=sentences.join('. ')+'.';const qualityMetrics=calculateQualityMetrics(text,summary,sentences,sentences);const visualizationData=generateVisualizationData(sentences,sentences.map(()=>1),[]);return{method:'TextRank',summary,sentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}// Build similarity matrix\nconst similarityMatrix=[];for(let i=0;i<sentences.length;i++){similarityMatrix[i]=[];for(let j=0;j<sentences.length;j++){if(i===j){similarityMatrix[i][j]=0;}else{similarityMatrix[i][j]=cosineSimilarity(sentences[i],sentences[j]);}}}// PageRank algorithm\nconst scores=new Array(sentences.length).fill(1);const damping=0.85;const iterations=50;for(let iter=0;iter<iterations;iter++){const newScores=[...scores];for(let i=0;i<sentences.length;i++){let sum=0;for(let j=0;j<sentences.length;j++){if(i!==j){const totalSim=similarityMatrix[j].reduce((a,b)=>a+b,0);if(totalSim>0){sum+=similarityMatrix[j][i]/totalSim*scores[j];}}}newScores[i]=1-damping+damping*sum;}scores.splice(0,scores.length,...newScores);}// Get top sentences\nconst rankedSentences=sentences.map((sentence,index)=>({sentence,score:scores[index],index})).sort((a,b)=>b.score-a.score).slice(0,numSentences).sort((a,b)=>a.index-b.index);const summary=rankedSentences.map(item=>item.sentence).join('. ')+'.';const selectedSentences=rankedSentences.map(item=>item.sentence);// Calculate quality metrics\nconst qualityMetrics=calculateQualityMetrics(text,summary,selectedSentences,sentences);// Generate visualization data\nconst visualizationData=generateVisualizationData(sentences,scores,similarityMatrix);return{method:'TextRank',summary,sentences:selectedSentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}// LexRank implementation\nexport function lexRankSummarize(text){let numSentences=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;const startTime=Date.now();const sentences=tokenizeSentences(text);if(sentences.length<=numSentences){const summary=sentences.join('. ')+'.';const qualityMetrics=calculateQualityMetrics(text,summary,sentences,sentences);const visualizationData=generateVisualizationData(sentences,sentences.map(()=>1),[]);return{method:'LexRank',summary,sentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}// Build similarity matrix\nconst threshold=0.1;const similarityMatrix=[];for(let i=0;i<sentences.length;i++){similarityMatrix[i]=[];for(let j=0;j<sentences.length;j++){const similarity=cosineSimilarity(sentences[i],sentences[j]);similarityMatrix[i][j]=similarity>threshold?similarity:0;}}// Normalize rows\nfor(let i=0;i<sentences.length;i++){const rowSum=similarityMatrix[i].reduce((a,b)=>a+b,0);if(rowSum>0){for(let j=0;j<sentences.length;j++){similarityMatrix[i][j]/=rowSum;}}}// Power iteration\nconst scores=new Array(sentences.length).fill(1/sentences.length);const iterations=50;for(let iter=0;iter<iterations;iter++){const newScores=new Array(sentences.length).fill(0);for(let i=0;i<sentences.length;i++){for(let j=0;j<sentences.length;j++){newScores[i]+=similarityMatrix[j][i]*scores[j];}}scores.splice(0,scores.length,...newScores);}// Get top sentences\nconst rankedSentences=sentences.map((sentence,index)=>({sentence,score:scores[index],index})).sort((a,b)=>b.score-a.score).slice(0,numSentences).sort((a,b)=>a.index-b.index);const summary=rankedSentences.map(item=>item.sentence).join('. ')+'.';const selectedSentences=rankedSentences.map(item=>item.sentence);// Calculate quality metrics\nconst qualityMetrics=calculateQualityMetrics(text,summary,selectedSentences,sentences);// Generate visualization data\nconst visualizationData=generateVisualizationData(sentences,scores,similarityMatrix);return{method:'LexRank',summary,sentences:selectedSentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}// Simple extractive summarization (frequency-based)\nexport function frequencyBasedSummarize(text){let numSentences=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;const startTime=Date.now();const sentences=tokenizeSentences(text);if(sentences.length<=numSentences){const summary=sentences.join('. ')+'.';const qualityMetrics=calculateQualityMetrics(text,summary,sentences,sentences);const visualizationData=generateVisualizationData(sentences,sentences.map(()=>1),[]);return{method:'Frequency-Based',summary,sentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}// Calculate word frequencies\nconst words=text.toLowerCase().match(/\\b\\w+\\b/g)||[];const wordFreq={};words.forEach(word=>{if(word.length>3){// Ignore short words\nwordFreq[word]=(wordFreq[word]||0)+1;}});// Score sentences based on word frequencies\nconst sentenceScores=sentences.map(sentence=>{const sentenceWords=sentence.toLowerCase().match(/\\b\\w+\\b/g)||[];const score=sentenceWords.reduce((sum,word)=>sum+(wordFreq[word]||0),0);return score/sentenceWords.length;// Normalize by sentence length\n});// Get top sentences\nconst rankedSentences=sentences.map((sentence,index)=>({sentence,score:sentenceScores[index],index})).sort((a,b)=>b.score-a.score).slice(0,numSentences).sort((a,b)=>a.index-b.index);const summary=rankedSentences.map(item=>item.sentence).join('. ')+'.';const selectedSentences=rankedSentences.map(item=>item.sentence);// Calculate quality metrics\nconst qualityMetrics=calculateQualityMetrics(text,summary,selectedSentences,sentences);// Create a simple similarity matrix for visualization (based on word overlap)\nconst similarityMatrix=[];for(let i=0;i<sentences.length;i++){similarityMatrix[i]=[];for(let j=0;j<sentences.length;j++){similarityMatrix[i][j]=i===j?0:cosineSimilarity(sentences[i],sentences[j]);}}// Generate visualization data\nconst visualizationData=generateVisualizationData(sentences,sentenceScores,similarityMatrix);return{method:'Frequency-Based',summary,sentences:selectedSentences,processingTime:Date.now()-startTime,qualityMetrics,visualizationData};}","map":{"version":3,"names":["Sentiment","tokenizeSentences","text","split","map","s","trim","filter","length","cosineSimilarity","sent1","sent2","words1","toLowerCase","words2","allWords","Array","from","Set","vector1","word","w","vector2","dotProduct","reduce","sum","val","i","magnitude1","Math","sqrt","magnitude2","sentiment","calculateQualityMetrics","originalText","summaryText","selectedSentences","allSentences","originalWords","match","summaryWords","coverage","size","coherenceSum","coherence","totalSummaryWords","diversity","confidence","sentimentResult","analyze","round","score","comparative","positive","negative","generateVisualizationData","sentences","scores","similarityMatrix","sentenceGraph","sentence","sentimentScore","connections","_","j","_similarityMatrix$i","target","weight","conn","id","slice","topicClusters","generateTopicClusters","words","flatMap","wordFreq","forEach","topWords","Object","entries","sort","_ref","_ref2","a","b","_ref3","clusters","colors","min","ceil","clusterKeywords","clusterSentences","some","keyword","includes","push","keywords","centroid","random","color","textRankSummarize","numSentences","arguments","undefined","startTime","Date","now","summary","join","qualityMetrics","visualizationData","method","processingTime","fill","damping","iterations","iter","newScores","totalSim","splice","rankedSentences","index","item","lexRankSummarize","threshold","similarity","rowSum","frequencyBasedSummarize","sentenceScores","sentenceWords"],"sources":["/Users/averyreyna/Codebases/rerank/src/utils/textSummarization.ts"],"sourcesContent":["// Text summarization utilities implementing TextRank and LexRank algorithms\nimport Sentiment from 'sentiment';\n\nexport interface QualityMetrics {\n  coverage: number; // 0-1, how much of the original text is represented\n  coherence: number; // 0-1, how well sentences flow together\n  diversity: number; // 0-1, how diverse the vocabulary is\n  confidence: number; // 0-1, overall confidence in the summary\n  sentiment: {\n    score: number;\n    comparative: number;\n    positive: string[];\n    negative: string[];\n  };\n}\n\nexport interface SentenceNode {\n  id: string;\n  text: string;\n  score: number;\n  sentiment: number;\n  connections: { target: string; weight: number }[];\n  position?: { x: number; y: number };\n}\n\nexport interface TopicCluster {\n  id: string;\n  keywords: string[];\n  sentences: string[];\n  centroid: number[];\n  color: string;\n}\n\nexport interface SummaryResult {\n  method: string;\n  summary: string;\n  sentences: string[];\n  processingTime: number;\n  qualityMetrics: QualityMetrics;\n  visualizationData: {\n    sentenceGraph: SentenceNode[];\n    topicClusters: TopicCluster[];\n  };\n}\n\n// Simple sentence tokenizer\nfunction tokenizeSentences(text: string): string[] {\n  return text\n    .split(/[.!?]+/)\n    .map(s => s.trim())\n    .filter(s => s.length > 10); // Filter out very short sentences\n}\n\n// Calculate cosine similarity between two sentences\nfunction cosineSimilarity(sent1: string, sent2: string): number {\n  const words1 = sent1.toLowerCase().split(/\\s+/);\n  const words2 = sent2.toLowerCase().split(/\\s+/);\n  \n  const allWords = Array.from(new Set([...words1, ...words2]));\n  \n  const vector1 = allWords.map(word => words1.filter(w => w === word).length);\n  const vector2 = allWords.map(word => words2.filter(w => w === word).length);\n  \n  const dotProduct = vector1.reduce((sum, val, i) => sum + val * vector2[i], 0);\n  const magnitude1 = Math.sqrt(vector1.reduce((sum, val) => sum + val * val, 0));\n  const magnitude2 = Math.sqrt(vector2.reduce((sum, val) => sum + val * val, 0));\n  \n  return magnitude1 && magnitude2 ? dotProduct / (magnitude1 * magnitude2) : 0;\n}\n\n// Initialize sentiment analyzer\nconst sentiment = new Sentiment();\n\n// Calculate quality metrics for a summary\nfunction calculateQualityMetrics(\n  originalText: string, \n  summaryText: string, \n  selectedSentences: string[],\n  allSentences: string[]\n): QualityMetrics {\n  // Coverage: ratio of unique words in summary vs original\n  const originalWords = new Set(originalText.toLowerCase().match(/\\b\\w+\\b/g) || []);\n  const summaryWords = new Set(summaryText.toLowerCase().match(/\\b\\w+\\b/g) || []);\n  const coverage = summaryWords.size / originalWords.size;\n\n  // Coherence: average similarity between consecutive sentences in summary\n  let coherenceSum = 0;\n  for (let i = 0; i < selectedSentences.length - 1; i++) {\n    coherenceSum += cosineSimilarity(selectedSentences[i], selectedSentences[i + 1]);\n  }\n  const coherence = selectedSentences.length > 1 ? coherenceSum / (selectedSentences.length - 1) : 1;\n\n  // Diversity: ratio of unique words to total words in summary\n  const totalSummaryWords = summaryText.toLowerCase().match(/\\b\\w+\\b/g) || [];\n  const diversity = summaryWords.size / totalSummaryWords.length;\n\n  // Confidence: weighted combination of metrics\n  const confidence = (coverage * 0.4 + coherence * 0.3 + diversity * 0.3);\n\n  // Sentiment analysis\n  const sentimentResult = sentiment.analyze(summaryText);\n\n  return {\n    coverage: Math.round(coverage * 100) / 100,\n    coherence: Math.round(coherence * 100) / 100,\n    diversity: Math.round(diversity * 100) / 100,\n    confidence: Math.round(confidence * 100) / 100,\n    sentiment: {\n      score: sentimentResult.score,\n      comparative: Math.round(sentimentResult.comparative * 100) / 100,\n      positive: sentimentResult.positive,\n      negative: sentimentResult.negative\n    }\n  };\n}\n\n// Generate visualization data\nfunction generateVisualizationData(\n  sentences: string[], \n  scores: number[], \n  similarityMatrix: number[][]\n): { sentenceGraph: SentenceNode[]; topicClusters: TopicCluster[] } {\n  // Create sentence nodes for graph visualization\n  const sentenceGraph: SentenceNode[] = sentences.map((sentence, i) => {\n    const sentimentScore = sentiment.analyze(sentence).comparative;\n    const connections = sentences.map((_, j) => ({\n      target: `sentence-${j}`,\n      weight: similarityMatrix[i]?.[j] || 0\n    })).filter(conn => conn.weight > 0.1 && conn.target !== `sentence-${i}`);\n\n    return {\n      id: `sentence-${i}`,\n      text: sentence.slice(0, 100) + (sentence.length > 100 ? '...' : ''),\n      score: scores[i] || 0,\n      sentiment: sentimentScore,\n      connections\n    };\n  });\n\n  // Simple topic clustering based on word overlap\n  const topicClusters = generateTopicClusters(sentences);\n\n  return { sentenceGraph, topicClusters };\n}\n\n// Generate topic clusters using simple k-means-like approach\nfunction generateTopicClusters(sentences: string[]): TopicCluster[] {\n  const words = sentences.flatMap(s => \n    s.toLowerCase().match(/\\b\\w{4,}\\b/g) || []\n  );\n  \n  const wordFreq: { [key: string]: number } = {};\n  words.forEach(word => {\n    wordFreq[word] = (wordFreq[word] || 0) + 1;\n  });\n\n  // Get top keywords\n  const topWords = Object.entries(wordFreq)\n    .sort(([,a], [,b]) => b - a)\n    .slice(0, 12)\n    .map(([word]) => word);\n\n  // Create clusters based on keyword presence\n  const clusters: TopicCluster[] = [];\n  const colors = ['#3B82F6', '#EF4444', '#10B981', '#F59E0B'];\n  \n  for (let i = 0; i < Math.min(3, Math.ceil(topWords.length / 4)); i++) {\n    const clusterKeywords = topWords.slice(i * 4, (i + 1) * 4);\n    const clusterSentences = sentences.filter(sentence => \n      clusterKeywords.some(keyword => \n        sentence.toLowerCase().includes(keyword)\n      )\n    );\n\n    if (clusterSentences.length > 0) {\n      clusters.push({\n        id: `cluster-${i}`,\n        keywords: clusterKeywords,\n        sentences: clusterSentences.map(s => s.slice(0, 80) + '...'),\n        centroid: [Math.random() * 100, Math.random() * 100], // Simplified\n        color: colors[i % colors.length]\n      });\n    }\n  }\n\n  return clusters;\n}\n\n// TextRank implementation\nexport function textRankSummarize(text: string, numSentences: number = 3): SummaryResult {\n  const startTime = Date.now();\n  const sentences = tokenizeSentences(text);\n  \n  if (sentences.length <= numSentences) {\n    const summary = sentences.join('. ') + '.';\n    const qualityMetrics = calculateQualityMetrics(text, summary, sentences, sentences);\n    const visualizationData = generateVisualizationData(sentences, sentences.map(() => 1), []);\n    \n    return {\n      method: 'TextRank',\n      summary,\n      sentences,\n      processingTime: Date.now() - startTime,\n      qualityMetrics,\n      visualizationData\n    };\n  }\n  \n  // Build similarity matrix\n  const similarityMatrix: number[][] = [];\n  for (let i = 0; i < sentences.length; i++) {\n    similarityMatrix[i] = [];\n    for (let j = 0; j < sentences.length; j++) {\n      if (i === j) {\n        similarityMatrix[i][j] = 0;\n      } else {\n        similarityMatrix[i][j] = cosineSimilarity(sentences[i], sentences[j]);\n      }\n    }\n  }\n  \n  // PageRank algorithm\n  const scores = new Array(sentences.length).fill(1);\n  const damping = 0.85;\n  const iterations = 50;\n  \n  for (let iter = 0; iter < iterations; iter++) {\n    const newScores = [...scores];\n    for (let i = 0; i < sentences.length; i++) {\n      let sum = 0;\n      for (let j = 0; j < sentences.length; j++) {\n        if (i !== j) {\n          const totalSim = similarityMatrix[j].reduce((a, b) => a + b, 0);\n          if (totalSim > 0) {\n            sum += (similarityMatrix[j][i] / totalSim) * scores[j];\n          }\n        }\n      }\n      newScores[i] = (1 - damping) + damping * sum;\n    }\n    scores.splice(0, scores.length, ...newScores);\n  }\n  \n  // Get top sentences\n  const rankedSentences = sentences\n    .map((sentence, index) => ({ sentence, score: scores[index], index }))\n    .sort((a, b) => b.score - a.score)\n    .slice(0, numSentences)\n    .sort((a, b) => a.index - b.index);\n  \n  const summary = rankedSentences.map(item => item.sentence).join('. ') + '.';\n  const selectedSentences = rankedSentences.map(item => item.sentence);\n  \n  // Calculate quality metrics\n  const qualityMetrics = calculateQualityMetrics(text, summary, selectedSentences, sentences);\n  \n  // Generate visualization data\n  const visualizationData = generateVisualizationData(sentences, scores, similarityMatrix);\n  \n  return {\n    method: 'TextRank',\n    summary,\n    sentences: selectedSentences,\n    processingTime: Date.now() - startTime,\n    qualityMetrics,\n    visualizationData\n  };\n}\n\n// LexRank implementation\nexport function lexRankSummarize(text: string, numSentences: number = 3): SummaryResult {\n  const startTime = Date.now();\n  const sentences = tokenizeSentences(text);\n  \n  if (sentences.length <= numSentences) {\n    const summary = sentences.join('. ') + '.';\n    const qualityMetrics = calculateQualityMetrics(text, summary, sentences, sentences);\n    const visualizationData = generateVisualizationData(sentences, sentences.map(() => 1), []);\n    \n    return {\n      method: 'LexRank',\n      summary,\n      sentences,\n      processingTime: Date.now() - startTime,\n      qualityMetrics,\n      visualizationData\n    };\n  }\n  \n  // Build similarity matrix\n  const threshold = 0.1;\n  const similarityMatrix: number[][] = [];\n  \n  for (let i = 0; i < sentences.length; i++) {\n    similarityMatrix[i] = [];\n    for (let j = 0; j < sentences.length; j++) {\n      const similarity = cosineSimilarity(sentences[i], sentences[j]);\n      similarityMatrix[i][j] = similarity > threshold ? similarity : 0;\n    }\n  }\n  \n  // Normalize rows\n  for (let i = 0; i < sentences.length; i++) {\n    const rowSum = similarityMatrix[i].reduce((a, b) => a + b, 0);\n    if (rowSum > 0) {\n      for (let j = 0; j < sentences.length; j++) {\n        similarityMatrix[i][j] /= rowSum;\n      }\n    }\n  }\n  \n  // Power iteration\n  const scores = new Array(sentences.length).fill(1 / sentences.length);\n  const iterations = 50;\n  \n  for (let iter = 0; iter < iterations; iter++) {\n    const newScores = new Array(sentences.length).fill(0);\n    for (let i = 0; i < sentences.length; i++) {\n      for (let j = 0; j < sentences.length; j++) {\n        newScores[i] += similarityMatrix[j][i] * scores[j];\n      }\n    }\n    scores.splice(0, scores.length, ...newScores);\n  }\n  \n  // Get top sentences\n  const rankedSentences = sentences\n    .map((sentence, index) => ({ sentence, score: scores[index], index }))\n    .sort((a, b) => b.score - a.score)\n    .slice(0, numSentences)\n    .sort((a, b) => a.index - b.index);\n  \n  const summary = rankedSentences.map(item => item.sentence).join('. ') + '.';\n  const selectedSentences = rankedSentences.map(item => item.sentence);\n  \n  // Calculate quality metrics\n  const qualityMetrics = calculateQualityMetrics(text, summary, selectedSentences, sentences);\n  \n  // Generate visualization data\n  const visualizationData = generateVisualizationData(sentences, scores, similarityMatrix);\n  \n  return {\n    method: 'LexRank',\n    summary,\n    sentences: selectedSentences,\n    processingTime: Date.now() - startTime,\n    qualityMetrics,\n    visualizationData\n  };\n}\n\n// Simple extractive summarization (frequency-based)\nexport function frequencyBasedSummarize(text: string, numSentences: number = 3): SummaryResult {\n  const startTime = Date.now();\n  const sentences = tokenizeSentences(text);\n  \n  if (sentences.length <= numSentences) {\n    const summary = sentences.join('. ') + '.';\n    const qualityMetrics = calculateQualityMetrics(text, summary, sentences, sentences);\n    const visualizationData = generateVisualizationData(sentences, sentences.map(() => 1), []);\n    \n    return {\n      method: 'Frequency-Based',\n      summary,\n      sentences,\n      processingTime: Date.now() - startTime,\n      qualityMetrics,\n      visualizationData\n    };\n  }\n  \n  // Calculate word frequencies\n  const words = text.toLowerCase().match(/\\b\\w+\\b/g) || [];\n  const wordFreq: { [key: string]: number } = {};\n  \n  words.forEach((word: string) => {\n    if (word.length > 3) { // Ignore short words\n      wordFreq[word] = (wordFreq[word] || 0) + 1;\n    }\n  });\n  \n  // Score sentences based on word frequencies\n  const sentenceScores: number[] = sentences.map((sentence: string) => {\n    const sentenceWords: string[] = sentence.toLowerCase().match(/\\b\\w+\\b/g) || [];\n    const score: number = sentenceWords.reduce((sum: number, word: string) => sum + (wordFreq[word] || 0), 0);\n    return score / sentenceWords.length; // Normalize by sentence length\n  });\n  \n  // Get top sentences\n  const rankedSentences = sentences\n    .map((sentence, index) => ({ sentence, score: sentenceScores[index], index }))\n    .sort((a, b) => b.score - a.score)\n    .slice(0, numSentences)\n    .sort((a, b) => a.index - b.index);\n  \n  const summary = rankedSentences.map(item => item.sentence).join('. ') + '.';\n  const selectedSentences = rankedSentences.map(item => item.sentence);\n  \n  // Calculate quality metrics\n  const qualityMetrics = calculateQualityMetrics(text, summary, selectedSentences, sentences);\n  \n  // Create a simple similarity matrix for visualization (based on word overlap)\n  const similarityMatrix: number[][] = [];\n  for (let i = 0; i < sentences.length; i++) {\n    similarityMatrix[i] = [];\n    for (let j = 0; j < sentences.length; j++) {\n      similarityMatrix[i][j] = i === j ? 0 : cosineSimilarity(sentences[i], sentences[j]);\n    }\n  }\n  \n  // Generate visualization data\n  const visualizationData = generateVisualizationData(sentences, sentenceScores, similarityMatrix);\n  \n  return {\n    method: 'Frequency-Based',\n    summary,\n    sentences: selectedSentences,\n    processingTime: Date.now() - startTime,\n    qualityMetrics,\n    visualizationData\n  };\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}